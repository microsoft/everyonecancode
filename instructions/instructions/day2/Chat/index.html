<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Challenge 7: Chat Bot | Anyone Can Code</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/everyonecancode/instructions/assets/css/0.styles.18a318fd.css" as="style"><link rel="preload" href="/everyonecancode/instructions/assets/js/app.2d5f41f0.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/2.5e6e3248.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/1.8e3fe37e.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/19.6ee437e2.js" as="script"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/10.2a5b88e7.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/11.f944dc81.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/12.08b23997.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/13.644a354e.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/14.820a14ac.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/15.088376e5.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/16.3c95d7d6.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/17.c72e70f8.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/18.5688472e.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/20.9ff708c3.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/21.9ecf2ade.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/22.5aa2da3b.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/23.b3936ccd.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/24.a34229fa.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/25.89914312.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/26.05d49e19.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/27.01cdf5e3.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/28.59d6752a.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/29.42d4a980.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/3.762c40d6.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/30.499b8934.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/31.a7a16060.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/4.b4bf3117.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/5.25ca78da.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/6.79f636cd.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/7.23f4d661.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/vendors~docsearch.1439aaf8.js">
    <link rel="stylesheet" href="/everyonecancode/instructions/assets/css/0.styles.18a318fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/everyonecancode/instructions/" class="home-link router-link-active"><!----> <span class="site-name">Anyone Can Code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/microsoft/everyonecancode" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/microsoft/everyonecancode" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/everyonecancode/instructions/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/everyonecancode/instructions/instructions/day1/GitHub/" class="sidebar-link">Challenge 1: GitHub</a></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart1/" class="sidebar-link">Challenge 2: Make your first code changes and merge your first pull request</a></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/" class="sidebar-link">Challenge 3: Create Milligram application on Azure</a></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart3/" class="sidebar-link">Challenge 4: Github Copilot</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Vision/" class="sidebar-link">Challenge 5: Object Recognition</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Speech/" class="sidebar-link">Challenge 6: Speech Recognition</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Chat/" aria-current="page" class="active sidebar-link">Challenge 7: Chat Bot</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#here-is-what-you-will-learn-üéØ" class="sidebar-link">Here is what you will learn üéØ</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#table-of-contents" class="sidebar-link">Table Of Contents</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#getting-started" class="sidebar-link">Getting started</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#create-openai-azure-service-instance" class="sidebar-link">Create OpenAI Azure service instance</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#deploying-openai-large-language-model" class="sidebar-link">Deploying openAI Large Language Model</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#azure-openai-credentials" class="sidebar-link">Azure OpenAI credentials</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day2/Chat/#run-frontend-pipeline-again" class="sidebar-link">Run Frontend Pipeline again</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="challenge-7-chat-bot"><a href="#challenge-7-chat-bot" class="header-anchor">#</a> Challenge 7: Chat Bot</h1> <p>‚è≤Ô∏è <em>est. time to complete: 30 min.</em> ‚è≤Ô∏è</p> <h2 id="here-is-what-you-will-learn-üéØ"><a href="#here-is-what-you-will-learn-üéØ" class="header-anchor">#</a> Here is what you will learn üéØ</h2> <p>In this challenge you will learn how to:</p> <ul><li>Create an OpenAI service in Azure</li> <li>Deploy an OpenAI model and connect it to your app</li> <li>Pass the API key to your app using GitHub Secrets</li> <li>Start chatting with model powered assistant in the app</li></ul> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table Of Contents</h2> <ol><li><a href="#getting-started">Getting Started</a></li> <li><a href="#create-openai-azure-service-instance">Create OpenAI Azure service instance</a></li> <li><a href="#deploying-openai-large-language-model">Deploying openAI Large Language Model</a></li> <li><a href="#azure-openai-credentials">Azure OpenAI credentials</a></li> <li><a href="#run-frontend-pipeline-again">Run Frontend Pipeline again</a></li></ol> <h3 id="further-informative-resources"><a href="#further-informative-resources" class="header-anchor">#</a> Further informative resources</h3> <ul><li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/" target="_blank" rel="noopener noreferrer">Azure OpenAI Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h2> <ul><li><p>Navigate to your <strong>Resource Group</strong> we created on Day 1 during the previous challenges again</p></li> <li><p>Create a new <strong>Resource</strong> and search for <strong>Azure OpenAI</strong></p> <p><img src="/everyonecancode/instructions/assets/img/resource-azure-openai.b9385411.png" alt="Screenshot of how to create a resource"></p></li></ul> <h2 id="create-openai-azure-service-instance"><a href="#create-openai-azure-service-instance" class="header-anchor">#</a> Create OpenAI Azure service instance</h2> <ul><li>Select <strong>Azure OpenAI</strong> and hit <strong>Create</strong>.</li> <li>Your subscription and resource group should already be set. Select <strong>westeurope</strong> as region and <strong>Standard S0</strong>.</li> <li>Give the resource a unique name.</li> <li>Hit <strong>Next</strong> and in network you should select &quot;All networks, including the internet, can access this resource.&quot;</li> <li>Hit <strong>Next</strong> twice and create the resource
<img src="/everyonecancode/instructions/assets/img/resource-azure-openai-settings.8b57cf3f.png" alt="Screenshot of Azure Portal create page for openAI Azure"> <img src="/everyonecancode/instructions/assets/img/resource-azure-openai-network.16c834ef.png" alt="Screenshot of Azure Portal create page for openAI Azure, networking"></li></ul> <h2 id="deploying-openai-large-language-model"><a href="#deploying-openai-large-language-model" class="header-anchor">#</a> Deploying openAI Large Language Model</h2> <ul><li><p>Go to the Azure openAI resource you created and click on <strong>Model deployments</strong></p></li> <li><p>Next, click on <strong>Create new deployment</strong> here we will choose the OpenAI model we want to deploy</p></li> <li><p>Select model <strong>gpt-35-turbo</strong> and model version <strong>Auto-update to default</strong></p></li> <li><p>Give a unique name to your deployment name then click on create</p> <p><img src="/everyonecancode/instructions/assets/img/gpt-turbo-deployment.b06a53fd.png" alt="Screenshot of Gpt turbo model deployment"></p></li></ul> <p>Congratulations! You just deployed an instance of the openAI gpt turbo model, we will later add this model to our Milligram app to build a chat bot. For now you can actually test it out inside azure and ask it a few questions. Go to the model you deployed and click on <strong>Open in Playground</strong>, there you can chat with the chat assistant. You can also change the parameters of the model under <strong>Configuration &gt; Parameters</strong></p> <p><img src="/everyonecancode/instructions/assets/img/gpt-playground.26f96025.png" alt="Screenshot of Gpt turbo model playground"></p> <h2 id="azure-openai-credentials"><a href="#azure-openai-credentials" class="header-anchor">#</a> Azure OpenAI credentials</h2> <p>In order to connect our user interface with the openAI model, we need to integrate the openAI credentials in the process. For this, there are 2 options. We can add our keys in the Azure web app (Option 1) or we can automate it by adding the keys in our github workflow.</p> <h3 id="option-1-add-openai-azure-credentials-to-web-app"><a href="#option-1-add-openai-azure-credentials-to-web-app" class="header-anchor">#</a> Option 1: Add OpenAI Azure credentials to web app</h3> <p>Go back to Azure and open the Milligram web app again:</p> <ul><li>Go to <strong>environment variables</strong></li> <li>Create new variable with name <strong>CHAT_API_KEY</strong> and paste Key 1</li> <li>Create another variable with name <strong>CHAT_API_ENDPOINT</strong> and paste the endpoint url</li> <li>Finally create another variable with name <strong>AZURE_OPENAI_MODEL_NAME</strong> And paste the name you chose when you deployed the gpt turbo model.</li></ul> <p><img src="/everyonecancode/instructions/assets/img/milligram-env-vars.a7283e2c.png" alt="Screenshot of Gpt turbo model playground"></p> <h3 id="option-2-integrate-openai-azure-credentials-into-github-secret"><a href="#option-2-integrate-openai-azure-credentials-into-github-secret" class="header-anchor">#</a> Option 2: Integrate OpenAI Azure credentials into GitHub Secret</h3> <p>Similar to what we did in the challenges on Day 1 we now want to add the secret keys to Github</p> <ul><li>Go to the Azure openAI resource dashboard and click on <strong>Keys and Endpoint</strong></li> <li>On Github Go to your repository, <strong>Settings &gt; Secrets and Variables &gt; Actions</strong> then click on <strong>create new repository secret</strong></li> <li>Create new secret with name <strong>CHAT_API_KEY</strong> and paste Key 1</li> <li>Create another secret with name <strong>CHAT_API_ENDPOINT</strong> and paste the endpoint url</li> <li>Finally create another secret with name <strong>AZURE_OPENAI_MODEL_NAME</strong> And paste the name you chose when you deployed the gpt turbo model.</li></ul> <p>Now we also want to add the secrets to our github workflow:</p> <ol><li>Add the following code snippet under <code>subscription-id</code> around line 74 in the file located at <strong>.github/workflows/main_milligram.yml</strong></li></ol> <div class="language- extra-class"><pre class="language-text"><code>      - uses: azure/appservice-settings@v1
        with:
          app-name: 'milligram'
          slot-name: 'Production'  # Optional and needed only if the settings have to be configured on the specific deployment slot
          app-settings-json: '[{ &quot;name&quot;: &quot;CHAT_API_KEY&quot;, &quot;value&quot;: &quot;${{ secrets.CHAT_API_KEY }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;CHAT_API_ENDPOINT&quot;, &quot;value&quot;:  &quot;${{ secrets.CHAT_API_ENDPOINT }}&quot;, &quot;slotSetting&quot;: false }, { &quot;name&quot;: &quot;AZURE_OPENAI_MODEL_NAME&quot;, &quot;value&quot;: &quot;${{ secrets.AZURE_OPENAI_MODEL_NAME }}&quot;, &quot;slotSetting&quot;: false }]'
        id: settings
</code></pre></div><h2 id="run-frontend-pipeline-again"><a href="#run-frontend-pipeline-again" class="header-anchor">#</a> Run Frontend Pipeline again</h2> <ul><li>Navigate to <strong>Actions</strong> &gt; <strong>Pages</strong> and <strong>Run workflow</strong></li></ul> <p>Click on the frontend link displayed under the deploy step under your pipeline <code>https://&lt;yourgithubhandle&gt;.github.io/...</code> or open the app on your phone.</p> <p>Our frontend application should now have a new button with a chat symbol that allows us to chat with our assistant. The assistant is powered by the model we deployed through the Azure OpenAI service. Have a chat with your bot üéâ</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/microsoft/everyonecancode/edit/master/instructions/day2/Chat/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/everyonecancode/instructions/instructions/day2/Speech/" class="prev">
        Challenge 6: Speech Recognition
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/everyonecancode/instructions/assets/js/app.2d5f41f0.js" defer></script><script src="/everyonecancode/instructions/assets/js/2.5e6e3248.js" defer></script><script src="/everyonecancode/instructions/assets/js/1.8e3fe37e.js" defer></script><script src="/everyonecancode/instructions/assets/js/19.6ee437e2.js" defer></script>
  </body>
</html>
