<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Challenge 3: Create Milligram application on Azure | Anyone Can Code</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/everyonecancode/instructions/assets/css/0.styles.18a318fd.css" as="style"><link rel="preload" href="/everyonecancode/instructions/assets/js/app.2d5f41f0.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/2.5e6e3248.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/1.8e3fe37e.js" as="script"><link rel="preload" href="/everyonecancode/instructions/assets/js/11.f944dc81.js" as="script"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/10.2a5b88e7.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/12.08b23997.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/13.644a354e.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/14.820a14ac.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/15.088376e5.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/16.3c95d7d6.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/17.c72e70f8.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/18.5688472e.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/19.6ee437e2.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/20.9ff708c3.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/21.9ecf2ade.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/22.5aa2da3b.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/23.b3936ccd.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/24.a34229fa.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/25.89914312.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/26.05d49e19.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/27.01cdf5e3.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/28.59d6752a.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/29.42d4a980.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/3.762c40d6.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/30.499b8934.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/31.a7a16060.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/4.b4bf3117.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/5.25ca78da.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/6.79f636cd.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/7.23f4d661.js"><link rel="prefetch" href="/everyonecancode/instructions/assets/js/vendors~docsearch.1439aaf8.js">
    <link rel="stylesheet" href="/everyonecancode/instructions/assets/css/0.styles.18a318fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/everyonecancode/instructions/" class="home-link router-link-active"><!----> <span class="site-name">Anyone Can Code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/microsoft/everyonecancode" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/microsoft/everyonecancode" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/everyonecancode/instructions/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/everyonecancode/instructions/instructions/day1/GitHub/" class="sidebar-link">Challenge 1: GitHub</a></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart1/" class="sidebar-link">Challenge 2: Make your first code changes and merge your first pull request</a></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/" aria-current="page" class="active sidebar-link">Challenge 3: Create Milligram application on Azure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/#here-is-what-you-will-learn-üéØ" class="sidebar-link">Here is what you will learn üéØ</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/#table-of-contents" class="sidebar-link">Table Of Contents</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/#milligram-application-frontend" class="sidebar-link">Milligram application frontend</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/#milligram-application-backend" class="sidebar-link">Milligram application backend</a></li><li class="sidebar-sub-header"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart2/#overcharged-we-got-you-covered" class="sidebar-link">Overcharged? We got you covered</a></li></ul></li><li><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart3/" class="sidebar-link">Challenge 4: Github Copilot</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Vision/" class="sidebar-link">Challenge 5: Object Recognition</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Speech/" class="sidebar-link">Challenge 6: Speech Recognition</a></li><li><a href="/everyonecancode/instructions/instructions/day2/Chat/" class="sidebar-link">Challenge 7: Chat Bot</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="challenge-3-create-milligram-application-on-azure"><a href="#challenge-3-create-milligram-application-on-azure" class="header-anchor">#</a> Challenge 3: Create Milligram application on Azure</h1> <p>‚è≤Ô∏è <em>Est. time to complete: 60 min.</em> ‚è≤Ô∏è</p> <h2 id="here-is-what-you-will-learn-üéØ"><a href="#here-is-what-you-will-learn-üéØ" class="header-anchor">#</a> Here is what you will learn üéØ</h2> <p>Today you will learn how to:</p> <ul><li>Get started with GitHub Actions</li> <li>Deploy the Milligram frontend to GitHub Pages</li> <li>Create a Python web app on Azure</li> <li>Deploy the Milligram backend on Azure with GitHub Actions</li></ul> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table Of Contents</h2> <ol><li><a href="#milligram-application-frontend">Milligram application frontend</a> <ol><li><a href="#enable-github-action">Enable GitHub Actions</a></li> <li><a href="#run-github-action">Run GitHub Actions</a></li> <li><a href="#enable-github-page-in-project-settings">Enable GitHub Pages in project settings</a></li> <li><a href="#open-github-page-on-your-phone">Open GitHub Page on your phone</a></li> <li><a href="#add-application-to-home-screen">Add application to home screen</a></li></ol></li> <li><a href="#milligram-application-backend">Milligram application backend</a> <ol><li><a href="#prepare-image-upload">Prepare image upload</a></li> <li><a href="#make-application-backend-run-in-the-cloud">Make application backend run in the cloud</a></li> <li><a href="#deploy-image-upload">Deploy image upload</a></li></ol></li> <li><a href="#overcharged-we-got-you-covered">Overcharged? We got you covered</a></li></ol> <h3 id="further-informative-resources"><a href="#further-informative-resources" class="header-anchor">#</a> Further informative resources</h3> <ul><li><a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">What are GitHub Actions?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.github.com/actions" target="_blank" rel="noopener noreferrer">GitHub Actions Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.github.com/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-repositories" target="_blank" rel="noopener noreferrer">What is a repository?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.microsoft.com/azure/cloud-adoption-framework/govern/resource-consistency/resource-access-management" target="_blank" rel="noopener noreferrer">What is a Resource / Resource Group / Subscription?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="milligram-application-frontend"><a href="#milligram-application-frontend" class="header-anchor">#</a> Milligram application frontend</h2> <p>First, let's get started with the frontend application - The part that you will
see and use on your mobile phone or your web browser. This is the main way to
interact with Milligram's services.</p> <details><summary>What does frontend mean?</summary> <p>Let's imagine a simple car. Everything you see - the seats, the roof, the floor, the user interface (dashboard, steering wheel, etc.) - that's all <strong>frontend</strong>.
Then you open the hood: and there it is! The <strong>backend</strong> and the <strong>API</strong>. You can see the engine, the transmission and some other elements.</p> <p>But how to understand this example now... quite simple. The <strong>frontend</strong> is what the user uses to give instructions to the <strong>backend</strong> via an <strong>API</strong>. So when you step on the gas pedal, the engine accelerates.</p> <p><em>Stepping on the gas pedal triggers a request in the frontend to the API in the backend for the engine to accelerate, and the required part of the backend (in this case, the engine) executes it.</em></p></details> <h3 id="enable-github-actions"><a href="#enable-github-actions" class="header-anchor">#</a> Enable GitHub Actions</h3> <p>We've prepared an automated way to create and update the website for you. You will use two of GitHub's awesome features. GitHub Pages and GitHub Actions. Let's get started with the actions.</p> <ul><li>Go to your repository's <strong>Actions</strong></li> <li>Click the button which says <em>I understand my workflows, go ahead and enable them</em> to enable GitHub Actions</li></ul> <p><em>A <a href="https://docs.github.com/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-repositories" target="_blank" rel="noopener noreferrer">repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> contains all of your project's files and each file's revision history. You can discuss and manage your project's work within the repository.</em></p> <p><img src="/everyonecancode/instructions/assets/img/EnableGithubActions.707a7c6d.png" alt="Enable GitHub Actions"></p> <p>Make sure that the Actions have read/write permissions. Check this via Settings-&gt;Actions-&gt;General and scroll down to the <em>Workflow permissions</em> section. Click the <em>Read and write permissions</em> option. Click <em>Save</em>.
<img src="/everyonecancode/instructions/assets/img/gh-actions-read.8fcc6217.png" alt="Check Settings"></p> <h3 id="run-github-actions"><a href="#run-github-actions" class="header-anchor">#</a> Run GitHub Actions</h3> <ul><li>In the <strong>Actions</strong> tab of your repository, click on the <strong>pages</strong> workflow.</li> <li>Open the <strong>Run Workflow</strong> dropdown and click the <strong>Run Workflow</strong> button to confirm the workflow execution.</li></ul> <p>Now, observe how the workflow is being run and take a look at the individual steps that are run for you by GitHub.</p> <p><img src="/everyonecancode/instructions/assets/img/FrontendRunWorkflow.2cf17716.png" alt="Run workflow"></p> <h3 id="enable-github-pages-in-project-settings"><a href="#enable-github-pages-in-project-settings" class="header-anchor">#</a> Enable GitHub Pages in project settings</h3> <p>To be able to display the website (frontend) we've built and deployed using
GitHub Actions, we need to enable GitHub Pages for your repository. GitHub
Pages are an easy way to display a static website related to your repository.
Many people use it to display the documentation for their projects. We will use
it to serve the frontend for Milligram.</p> <ul><li>Go to your repository settings-
<img src="/everyonecancode/instructions/assets/img/RepoSettingsTab.912b79ec.png" alt="Repository Settings"></li> <li>Navigate to <strong>Pages</strong>, select the branch <em>gh-pages</em> and hit the save button.
<img src="/everyonecancode/instructions/assets/img/FrontendPagesUpdated.4b692e87.png" alt="Enable Pages"></li> <li>The deployment will take 1-2 minutes. After that, the Milligram website is
accessible through <code>https://&lt;your github username&gt;.github.io/everyonecancode/</code>.</li></ul> <p>Take a look at the website. Try changing the profile to your GitHub account name
and see that it is stored even if you refresh the browser.</p> <h3 id="open-github-page-on-your-phone"><a href="#open-github-page-on-your-phone" class="header-anchor">#</a> Open GitHub Page on your phone</h3> <p>Milligram is a fun little app similar to photo based social media that you might
be familiar with. Of course we want to use it on our mobile phones so we can use
the cameras to take awesome selfies and pictures for Milligram. Its main
features are:</p> <ul><li>Display simple GitHub account information from your own profile</li> <li>Take photos and add them to the stream of images</li> <li>Detect objects within images and create image descriptions (implemented on day 2)</li> <li>Transcribe sentences you speak using Azure Speech Service (implemented on day 2)</li></ul> <p>Your app is available. But there is no storage or database behind it. So it won't be able to store any data. We'll install that in the next step.</p> <p>Now, to make the first modifications, open your personal Milligram website on your phone and explore it's content. Then edit the profile in the app to show your own GitHub profile picture in the app.</p> <p><img src="/everyonecancode/instructions/assets/img/FrontendHomescreen0.8cc70f81.jpg" alt="Add to homescreen 1"></p> <h3 id="add-the-application-to-your-homescreen"><a href="#add-the-application-to-your-homescreen" class="header-anchor">#</a> Add The application to your homescreen</h3> <p>On modern mobile phones, you can &quot;install&quot; web apps on you homescreen to make them
more accessible and make them look more like an app from an official
appstore. Therefore, we will not add the app to our phones' homescreen.</p> <ul><li>Open the browser menu to add the website to your homescreen.
<ul><li>This is how it should look like on ios:
<img src="/everyonecancode/instructions/assets/img/FrontendHomescreen1.e663a232.jpg" alt="Add to homescreen ios"></li> <li>This is how it should look on Android:
<img src="/everyonecancode/instructions/assets/img/FrontendHomescreen1.e663a232.jpg" alt="Add to homescreen Android"></li></ul></li> <li>Now you can open the website like a normal app from the homescreen of your phone.</li></ul> <h2 id="milligram-application-backend"><a href="#milligram-application-backend" class="header-anchor">#</a> Milligram application backend</h2> <p>The application backend will receive uploaded photos, store them for us and return them when needed.</p> <p>Our application can be divided into a frontend (something you see and runs locally on your phone) and a backend (something which processes your information). In this case, as we want to create our own social media application, we need pictures to be stored for our &quot;News Feed&quot;. That means we need a place to store many files and a place to run our application logic (which is our programming code).</p> <p>To store the files, we will use an &quot;Azure Storage Account&quot; and to run our application, we will use an &quot;Azure Web App&quot;.
First things first - sign into your &quot;Azure Account&quot;.</p> <h3 id="log-into-azure"><a href="#log-into-azure" class="header-anchor">#</a> Log Into Azure</h3> <ul><li><p>Go to your browser and visit <a href="https://ms.portal.azure.com/?l=en.en-us#home" target="_blank" rel="noopener noreferrer">portal.azure.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li> <li><p>Log in with <code>your Azure Account</code>. The login information is provided to you by your trainer. Ask them if you don't know where to find it.</p></li></ul> <p><img src="/everyonecancode/instructions/assets/img/LogInAzure.2158f80c.png" alt="Log In Azure"></p> <h3 id="create-storage-account"><a href="#create-storage-account" class="header-anchor">#</a> Create Storage Account</h3> <p>Our storage account is the place where we &quot;save&quot; our pictures for our news feed.
Inside the storage account we use the so called <a href="https://learn.microsoft.com/en-us/azure/storage/blobs/" target="_blank" rel="noopener noreferrer">Azure Blob Storage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The Blob Storage can hold a massive amount of files.
Just like the disk or storage on your computer. A cool fun fact is that you can store as many photos on the storage account as you like and you don't have to worry about your storage space.</p> <blockquote><p><strong>Azure Resource</strong>: In Azure, the term resource refers to an entity managed by Azure. For example, virtual machines, virtual networks,
and storage accounts are all referred to as Azure resources.</p></blockquote> <blockquote><p><strong>Azure Resource Group</strong>: A resource group is a container that holds related resources for an Azure solution. The resource group can include all the
resources &gt; for the solution, or only those resources that you want to manage as a group.</p></blockquote> <ul><li>Go to the home page of the Azure Portal.</li> <li>Click on <em>+ Create a resource</em>.</li> <li>Search for <em>Storage Account</em> and click <em>Create</em>.</li> <li>Select your subscription &amp; the resource group with the name that you used to log into the Azure Portal.</li> <li>The name of your Azure Storage account needs to be globally unique. It also has to use small letters and no special characters.</li> <li>Make sure to select <code>Standard</code> for <em>Performance</em> and <code>Locally-redundant storage (LRS)</code> for <em>Redundancy</em>.
<img src="/everyonecancode/instructions/assets/img/BackendStorage1.befee944.png" alt="Storage"></li> <li>Hit <em>Review</em> and after that <em>Create</em> to finish creating the storage account.</li> <li>Once the storage account is created there should be a button <em>Go to resource</em>. Click on it.</li> <li>Now you should see your storage account. Select <em>Containers</em> on the left hand side.</li> <li>Click the <em>New Container</em> button and create a container named <code>images</code>. Leave everything in the preconfigured settings as is.</li></ul> <p>This is the place where all uploaded images to our Milligram app will be stored.</p> <h3 id="create-web-app"><a href="#create-web-app" class="header-anchor">#</a> Create Web App</h3> <p>Our <a href="https://learn.microsoft.com/en-us/azure/static-web-apps/" target="_blank" rel="noopener noreferrer">Azure Web App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a computer managed by Microsoft where you can easily run your own application without worrying about software updates, security issues, backUp or hardware issues (as you might have already experienced on your phone).</p> <ul><li>Go to the home page of the Azure Portal again.</li> <li>Click on <em>+ Create a resource</em> as you did before.</li> <li>Search for <em>Web App</em> and click <em>Create</em>.</li> <li>Select your subscription &amp; your Resource Group.</li> <li>Make sure to adjust the settings according to the image below:
<ul><li>Name: <code>&lt;pick your own unique name&gt;</code></li> <li>Publish: <code>Code</code></li> <li>Runtime stack: <code>Python 3.12</code></li> <li>Operating System: <code>Linux</code></li> <li>Region: <code>West Europe</code> <img src="/everyonecancode/instructions/assets/img/BackendApp0.2444323f.png" alt="backend 0"></li></ul></li> <li>Create a new App Service Plan and <code>&lt;pick your own name&gt;</code>.
<img src="/everyonecancode/instructions/assets/img/BackendApp1.b383f909.png" alt="backend 1"></li> <li>In the pricing plan dropdown menu, select <strong>Free F1</strong> which is free, otherwise you might be charged when creating a larger plan.</li> <li>Click <em>Review + Create</em> at the bottom of the screen.</li> <li>Review the displayed information and click <em>Create</em> on the next screen to spin up the backend application.</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù On the review page, you can find information about the estimated costs of your service. Make sure it displays <em>Estimated price - Free</em></p></div> <h3 id="integrate-storage-and-configure-web-app"><a href="#integrate-storage-and-configure-web-app" class="header-anchor">#</a> Integrate storage and configure Web App</h3> <p>Now let's connect our application with our storage so that you can take pictures on your phone and store them. We need to tell the Web application where it can find our storage service. The application can take external configurations to configure the connection to the storage account.</p> <ul><li>For this reason navigate to your <em>Storage account</em> again. You should be able to find it via the search bar in the top either by searching its unique name or just storage account.</li> <li>Under <em>Access keys</em> you can find the <em>Connection string</em> from our storage account. Hit the <em>üëÄ Show keys</em> button so are able to copy it's value to e.g. a notepad.
<img src="/everyonecancode/instructions/assets/img/SecretAccessKeys.97e8b72d.png" alt="Screenshot of Access key page in Azure portal"></li> <li>Navigate back to the web app and open the <em>Configuration</em> tab, click <em>New connection string</em> and create a new connection string with the following settings:
<table><thead><tr><th>Connection string</th> <th>Type</th> <th>Value</th></tr></thead> <tbody><tr><td><code>STORAGE</code></td> <td>Custom</td> <td><code>&lt;paste your (earlier copied) connection string from Storage Account&gt;</code></td></tr></tbody></table></li> <li>Hit <code>ok</code> and <code>Save</code>.</li> <li>Navigate and scroll down to the <em>CORS</em> tab on the left hand side of your app service and enter <code>https://&lt;YourGithubHandle&gt;.github.io</code> under <em>Allowed Origins</em>.</li> <li>Hit <code>Save</code> again.</li></ul> <p>Now your storage account and web app are successfully connected and can communicate with each other.</p> <h3 id="azure-web-app-configuration"><a href="#azure-web-app-configuration" class="header-anchor">#</a> Azure Web App configuration</h3> <p>There is still a small configuration missing. Our app uses a ready-made module so that users can interact with their content. But this module is not installed yet. In order for it to be installed, we provide the web app with a configuration that is executed when the app is launched, allowing users to interact with our app's data.</p> <ul><li>Navigate to <strong><em>Configuration</em></strong> under <em>Settings</em>.</li> <li>Under the tab <strong><em>General settings</em></strong> you should find the <em>Stack settings</em>. For our backend we are working with the programming language Python - more specifically Python 3.12.</li> <li>Behind <strong><em>Startup Command</em></strong> enter <code>gunicorn -k uvicorn.workers.UvicornWorker</code> and hit <em>Save</em>.
<img src="/everyonecancode/instructions/assets/img/AppServiceStartupCommand.d4980096.png" alt="How to configure the Startup Command of the Web application"></li></ul> <h3 id="deploy-milligram-backend-code-to-azure-web-app-via-github-actions"><a href="#deploy-milligram-backend-code-to-azure-web-app-via-github-actions" class="header-anchor">#</a> Deploy Milligram backend code to Azure Web App via GitHub Actions</h3> <p>To ensure our social media application can actually do something, we need to bring our source code to the Azure Web App. To do that we will automate this so called &quot;deployment&quot;. Hence, we don't have to rely on a manual process every time we want to make changes (e.g. changing the title of the application) to our application and thus, we avoid many mistakes.</p> <ul><li>Navigate to the <em>Deployment Center</em> tab on the left hand side of your Web App in the Azure portal.</li> <li>Under the <em>Settings</em> tab select <em>GitHub</em> as <em>Source</em> and click <em>Authorize</em>.</li> <li>Under <em>Organization</em> select your GitHub handle and under <em>Repository</em> select <code>anyonecancode</code> as well as the <code>main</code> <em>Branch</em>.</li> <li>Hit <code>Save</code>.</li></ul> <p>Once you have hit <code>Save</code> the service automatically creates a workflow file in your GitHub repository. This workflow is immediately being executed and after about 2 minutes your web app is ready. You can also check your deployment on your &quot;Actions&quot; tab in your repository. The color green is always a good sign.</p> <h3 id="check-if-milligram-app-is-running-correctly"><a href="#check-if-milligram-app-is-running-correctly" class="header-anchor">#</a> Check if Milligram app is running correctly</h3> <p>Let's pause a second. To make sure that you are on track, test if our app's frontend gets a response from our backend service. Before we bring everything together, we want to make sure the backend service is working as expected.</p> <ul><li><p>Navigate to the <em>Overview</em> tab on the left hand side of the Web App Service.
<img src="/everyonecancode/instructions/assets/img/AppServicesDocLink.6c3a3392.png" alt="App Service URL"></p></li> <li><p>Hit on Default Domain, add <code>/docs</code> to the end, then test the website using the interactive documentation to figure out if the features of our Milligram will work.</p></li> <li><p>In your browser you will have the following view:
<img src="/everyonecancode/instructions/assets/img/TestAPIGetImages.a918ac5c.png" alt="Test API Page"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù If you want to learn more about OpenAPI have a look at <a href="https://en.wikipedia.org/wiki/OpenAPI_(software)" target="_blank" rel="noopener noreferrer">Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div></li> <li><p>Select the <em>GET/images</em> endpoint, hit <code>Try it Out</code> and then hit <code>Execute</code>. Once you get the 200 Response code, you have a successful running service. Congratulations!</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>üìù Look at the HTTP Response Codes at <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_blank" rel="noopener noreferrer">Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. 2xx Codes generally mean success, where as 4xx and 5xx Codes show different kinds of errors. You probably know 404 - Not Found.</p></div></li></ul> <h3 id="clarifications-what-have-we-done-so-far"><a href="#clarifications-what-have-we-done-so-far" class="header-anchor">#</a> Clarifications, What have we done so far?</h3> <p>Congratulations, you have just deployed the backend to your web application! Let us summarize what we have done so far.<br>
First, we have deployed the frontend (user interface) of our web app using github pages. This is what you see when you go to your github pages link. The frontend needed a server to serve images and run some logic. This is where the azure part came in. First, we created a storage resource, this is responsible for storing our images. Second, we created a web app resource, here we will run our server logic. The server logic is written in Python using a framework called FastAPI. The server logic code is hosted in the everyonecancode github repository. We connected our web app to the github repository and we instructed the server to run a specific command upon starting the web app. This command will start running our server logic, this is why you can see the docs in your browser under <code>/docs</code>.  Next up, we will try to connect the Frontend to the Backend.</p> <h3 id="integrate-azure-web-app-url-in-github-secrets"><a href="#integrate-azure-web-app-url-in-github-secrets" class="header-anchor">#</a> Integrate Azure Web App URL in GitHub Secrets</h3> <p>Now that we are sure that our backend service works as expected, we can bring everything together.</p> <p>To do this, we will use a GitHub feature called <em>Secrets</em>, where you can store your backend URL to make your frontend talk to the backend service.</p> <ul><li>On your Repository page in GitHub select <em>Settings</em> and navigate to <em>Secrets and Variables</em> &gt; <em>Actions</em>.</li> <li>Add a <em>New repository secret</em> named <code>VITE_IMAGE_API_URL</code> and as value set <code>&lt;your WebApp's URL&gt;</code>.
<blockquote><p>‚ö†Ô∏è‚ö†Ô∏è Your URL should end on a <strong>/</strong>. It should look like this: <code>https://xxxx.azurewebsites.net/</code> &gt; <img src="/everyonecancode/instructions/assets/img/VITE_IMAGE_API_URL.948b8b40.png" alt="GitHub Secrets Create"></p></blockquote></li></ul> <h3 id="run-frontend-pipeline-again"><a href="#run-frontend-pipeline-again" class="header-anchor">#</a> Run frontend Pipeline again</h3> <p>For the change of adding the secret taking effect in the frontend, we need to run our build pipeline again so that the process can pickup the newly created setting.</p> <ul><li><p>Navigate to the <em>Actions</em> tab, select the <em>pages</em> workflow and rerun the workflow:
<img src="/everyonecancode/instructions/assets/img/RunWorkflowFrontend.d8f8b9fa.png" alt="GitHub frontend Workflow"></p></li> <li><p>Once the workflow is started you will see the workflow running. You can get to the view below by clicking on the workflow run.
<img src="/everyonecancode/instructions/assets/img/FrontendInProgress.9535c45d.png" alt="GitHub frontend Workflow Progress"></p></li> <li><p>Finally finishing up the Milligram Service.
<img src="/everyonecancode/instructions/assets/img/FrontendDone.8fe01fa4.png" alt="GitHub frontend Workflow Done"></p></li></ul> <h3 id="open-the-app-take-a-selfie-and-review-your-news-feed"><a href="#open-the-app-take-a-selfie-and-review-your-news-feed" class="header-anchor">#</a> Open the App - Take a Selfie and review your News Feed</h3> <p>Click on the frontend link displayed under the deploy step under your pipeline <code>https://&lt;yourGithubHandle&gt;.github.io/...</code> or reopen the App on your phone.</p> <p>Our frontend application should now have a new button with a camera symbol that allows us to take pictures. These pictures should then appear on the timeline or news feed.</p> <p>So go ahead and take at least 5 pictures and make sure they appear in your app. Make sure to share them with at least 1-2 friends so they can also upload their photos to your News Feed.</p> <p>That's a wrap for today. Congrats! üéâ</p> <p>Tomorrow, we will make our app smart by adding artificial intelligence to it for detecting objects within your images as well as talking to our app.</p> <h2 id="overcharged-we-got-you-covered"><a href="#overcharged-we-got-you-covered" class="header-anchor">#</a> Overcharged? We got you covered</h2> <p>Ask your coach if you did not succeed. We have you covered with a back up.</p> <h3 id="use-prepared-milligram-backend-service"><a href="#use-prepared-milligram-backend-service" class="header-anchor">#</a> Use prepared Milligram backend Service</h3> <p>Look at the prepared application with our pictures for you to play around <a href="https://codeunicornmartha.github.io/FemaleAIAppInnovationEcosystem/#/?stack-key=a78e2b9a" target="_blank" rel="noopener noreferrer">Milligram<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart1/">‚óÄ Previous challenge</a> | <a href="/everyonecancode/instructions/" class="router-link-active">üîº Home</a> | <a href="/everyonecancode/instructions/instructions/day2/Vision/">Next challenge ‚ñ∂</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/microsoft/everyonecancode/edit/master/instructions/day1/ApplicationPart2/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/everyonecancode/instructions/instructions/day1/ApplicationPart1/" class="prev">
        Challenge 2: Make your first code changes and merge your first pull request
      </a></span> <span class="next"><a href="/everyonecancode/instructions/instructions/day1/ApplicationPart3/">
        Challenge 4: Github Copilot
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/everyonecancode/instructions/assets/js/app.2d5f41f0.js" defer></script><script src="/everyonecancode/instructions/assets/js/2.5e6e3248.js" defer></script><script src="/everyonecancode/instructions/assets/js/1.8e3fe37e.js" defer></script><script src="/everyonecancode/instructions/assets/js/11.f944dc81.js" defer></script>
  </body>
</html>
